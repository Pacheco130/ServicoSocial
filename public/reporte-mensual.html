<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Reporte Mensual</title>
    <link rel="stylesheet" href="reporte-mensual.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const fase1 = document.getElementById('fase1');
            const fase2 = document.getElementById('fase2');
            const siguienteBtn = document.getElementById('siguienteBtn');
            fase2.style.display = 'none';
            siguienteBtn.addEventListener('click', function (e) {
                e.preventDefault();
                fase1.style.display = 'none';
                fase2.style.display = 'block';
            });

            // Fechas hábiles manuales por reporte
            const fechasPorReporte = [
                ["2025-11-18","2025-11-19","2025-11-20","2025-11-21","2025-11-24"], // Reporte 1
                ["2025-12-16","2025-12-17","2025-12-18","2025-12-19","2026-01-05"], // Reporte 2
                ["2026-01-16","2026-01-19","2026-01-20","2026-01-21","2026-01-22"], // Reporte 3
                ["2026-02-16","2026-02-17","2026-02-18","2026-02-19","2026-02-20"], // Reporte 4
                ["2026-03-17","2026-03-18","2026-03-19","2026-03-20","2026-03-23"], // Reporte 5
                ["2026-04-16","2026-04-17","2026-04-20","2026-04-21","2026-04-22"], // Reporte 6
                ["2026-05-18","2026-05-19","2026-05-20","2026-05-21","2026-05-22"]  // Reporte 7
            ];
            const nreporte = document.getElementById('nreporte');
            const fecha = document.getElementById('fecha');
            let fp = null;
            nreporte.addEventListener('change', function () {
                const idx = parseInt(nreporte.value) - 1;
                if (fp) fp.destroy();
                if (idx >= 0 && fechasPorReporte[idx]) {
                    fp = flatpickr(fecha, {
                        dateFormat: "Y-m-d",
                        enable: fechasPorReporte[idx],
                        defaultDate: fechasPorReporte[idx][0],
                        minDate: fechasPorReporte[idx][0]
                    });
                    fecha.value = fechasPorReporte[idx][0];
                } else {
                    fecha.value = '';
                }
            });
        });
    </script>
</head>
<body>
    <header>
        <h1>Reporte Mensual</h1>
        <img src="/img/CECyt19.png" alt="Logo Izquierdo" class="corner-image left">
        <img src="/img/IPN.png" alt="Logo Derecho" class="corner-image right">
    </header>
    <div class="form-container">
        <form id="reporteForm" method="POST" action="/generate-reporte-mensual">
            <div id="fase1">
                <div class="form-flex">
                    <div class="form-col">
                        <div class="form-group">
                            <label for="nreporte">N. Reporte:</label>
                            <select id="nreporte" name="nreporte" required>
                                <option value="">Seleccione...</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="nombreA">Nombre:</label>
                            <input type="text" id="nombreA" name="nombreA" required>
                        </div>
                        <div class="form-group">
                            <label for="boleta">Boleta:</label>
                            <input type="text" id="boleta" name="boleta" required>
                        </div>
                        <div class="form-group">
                            <label for="telefono">Teléfono:</label>
                            <input type="tel" id="telefono" name="telefono" required>
                        </div>
                        <div class="form-group">
                            <label for="prestatario">Prestatario:</label>
                            <input type="text" id="prestatario" name="prestatario" required>
                        </div>
                        <div class="form-group">
                            <label for="encargadoDirecto">Encargado Directo:</label>
                            <input type="text" id="encargadoDirecto" name="encargadoDirecto" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label for="nregistro">N. Registro:</label>
                            <input type="text" id="nregistro" name="nregistro" required>
                        </div>
                        <div class="form-group">
                            <label for="carrera">Carrera:</label>
                            <select id="carrera" name="carrera" required>
                                <option value="">Seleccione...</option>
                                <option value="Tecnico en Aeronáutica">Técnico en Aeronáutica</option>
                                <option value="Tecnico en Alimentos">Técnico en Alimentos</option>
                                <option value="Tecnico en Construccion">Técnico en Construcción</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="semestre">Semestre:</label>
                            <select id="semestre" name="semestre" required>
                                <option value="">Seleccione...</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="fecha">Fecha:</label>
                            <input type="text" id="fecha" name="fecha" required>
                        </div>
                        <div class="form-group">
                            <label for="correo">Correo:</label>
                            <input type="email" id="correo" name="correo" required>
                        </div>
                        <div class="form-group">
                            <label for="cargo">Cargo:</label>
                            <input type="text" id="cargo" name="cargo" required>
                        </div>
                    </div>
                </div>
                <button id="siguienteBtn">Siguiente</button>
            </div>
            <div id="fase2">
                <div class="form-group">
                    <label>Actividades:</label>
                    <div class="actividades-group">
                        <input type="text" name="actividad1" id="actividad1" placeholder="Actividad 1" required>
                        <input type="text" name="actividad2" id="actividad2" placeholder="Actividad 2" required>
                        <input type="text" name="actividad3" id="actividad3" placeholder="Actividad 3" required>
                        <input type="text" name="actividad4" id="actividad4" placeholder="Actividad 4" required>
                        <input type="text" name="actividad5" id="actividad5" placeholder="Actividad 5" required>
                        <input type="text" name="actividad6" id="actividad6" placeholder="Actividad 6" required>
                        <input type="text" name="actividad7" id="actividad7" placeholder="Actividad 7" required>
                    </div>
                </div>
                <button type="submit">Descargar Reporte</button>
            </div>
        </form>
    </div>
    <script src="reporte-mensual.js"></script>
    <script src="script.js"></script>
</body>
</html>